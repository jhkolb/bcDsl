principals [ vendor, buyer ]

data {
    WarrantyStart: timestamp
}

-> ordered authorization [ vendor ]

ordered -> shipped authorization [vendor] {}

shipped -> delivered authorization [ vendor and buyer ] {
    WarrantyStart = now
}

delivered -> vendorQualified authorization [ vendor ] {}

vendorQualified -> accepted authorization [ buyer ] {}

accepted -> warrantyClaimed, authorization [ buyer ]
    requires [ now - WarrantyStart < 1*year ] {}

warrantyClaimed -> degraded authorization [ vendor and buyer ]

degraded -> accepted authorization [ vendor and buyer ] {}
